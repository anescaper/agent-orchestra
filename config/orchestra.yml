# Agent Orchestra Configuration

orchestra:
  # Name of your orchestration system
  name: "Agent Orchestra"

  # Version
  version: "1.0.0"

  # Default mode when not specified
  default_mode: "auto"

  # Scheduling configuration
  schedule:
    # How often to run (in pipeline, this is controlled by cron)
    interval_hours: 1

    # Retry configuration
    max_retries: 3
    retry_delay_seconds: 60

# Client mode: "claude-code" (free), "api" (paid), or "hybrid" (API with CLI fallback)
# Can be overridden by CLIENT_MODE env var
client:
  default_mode: "hybrid"

# Agent configurations
# Each agent can override the global client mode and define a system prompt.
agents:
  monitor:
    enabled: true
    timeout_seconds: 120
    # Use free CLI for simple monitoring tasks
    client_mode: "claude-code"
    system_prompt: >
      You are a system health monitor. Check the current state of the
      system and report any anomalies, warnings, or failures concisely.

  analyzer:
    enabled: true
    timeout_seconds: 180
    # Use API for analysis tasks that benefit from system prompts
    client_mode: "api"
    system_prompt: >
      You are a data analyst specializing in system performance.
      Identify patterns, bottlenecks, and actionable improvements.
      Be quantitative when possible.

  researcher:
    enabled: true
    timeout_seconds: 300
    # Hybrid: try API first, fall back to CLI
    client_mode: "hybrid"
    system_prompt: >
      You are a research assistant focused on AI and multi-agent systems.
      Provide well-structured summaries with key takeaways.

  reporter:
    enabled: true
    timeout_seconds: 120
    # Inherit global mode (no override)
    system_prompt: >
      You are a technical report writer. Synthesize information from
      multiple sources into clear, actionable reports.

# Output configuration
outputs:
  # Where to save results
  directory: "outputs"

  # Retention period in days
  retention_days: 30

  # File formats
  formats:
    - json
    - txt

# DigitalOcean configuration
digitalocean:
  region: "nyc3"

  # Container registry
  registry: "agent-orchestra"

  # App platform settings (if using)
  app:
    instance_size: "basic-xxs"
    instance_count: 1

# Notifications (configure your preferred method)
notifications:
  # Enable/disable notifications
  enabled: false

  # Notification channels
  channels:
    slack:
      enabled: false
      webhook_url: ""

    email:
      enabled: false
      recipients: []

    discord:
      enabled: false
      webhook_url: ""

# Logging configuration
logging:
  level: "INFO"
  format: "json"

# Agent Teams configuration (Claude Code Agent Teams / Opus 4.6)
teams:
  enabled: true
  # Directory where Claude Code stores team task state
  tasks_dir: "~/.claude/tasks"
  # Where to save team results
  output_prefix: "teams"

  definitions:
    feature-dev:
      description: "Full feature development lifecycle"
      teammates:
        - name: architect
          role: >
            You are a software architect. Analyze the requirements, design the
            solution architecture, define interfaces, and identify edge cases.
            Output a clear implementation plan with file-by-file changes.
          timeout_seconds: 300
        - name: implementer
          role: >
            You are a senior developer. Follow the architect's plan exactly.
            Write clean, tested, production-ready code. Include error handling
            and follow existing project conventions.
          timeout_seconds: 600
        - name: reviewer
          role: >
            You are a code reviewer. Review the implementation for correctness,
            edge cases, security issues, and style consistency. Provide specific
            actionable feedback with line references.
          timeout_seconds: 300

    code-review:
      description: "Thorough code review with security and style focus"
      teammates:
        - name: security-reviewer
          role: >
            You are a security engineer. Audit the code for OWASP top 10
            vulnerabilities, injection risks, authentication flaws, and data
            exposure. Rate severity and provide fix recommendations.
          timeout_seconds: 300
        - name: style-reviewer
          role: >
            You are a code quality expert. Review for readability, naming
            conventions, DRY violations, complexity, and consistency with the
            project's existing patterns. Suggest concrete improvements.
          timeout_seconds: 300

    debug:
      description: "Systematic debugging workflow"
      teammates:
        - name: reproducer
          role: >
            You are a QA engineer. Reproduce the reported bug by analyzing
            the code path, identifying inputs that trigger the issue, and
            writing a minimal reproduction case or failing test.
          timeout_seconds: 300
        - name: analyzer
          role: >
            You are a debugging specialist. Analyze the reproduction case,
            trace the root cause through the codebase, and explain exactly
            why the bug occurs with references to specific code locations.
          timeout_seconds: 300
        - name: fixer
          role: >
            You are a senior developer focused on bug fixes. Implement the
            minimal correct fix based on the root cause analysis. Ensure the
            fix doesn't introduce regressions and add test coverage.
          timeout_seconds: 300

    research:
      description: "Research and synthesize information on a topic"
      teammates:
        - name: searcher
          role: >
            You are a research analyst. Search broadly for information on
            the given topic. Gather relevant sources, code examples, docs,
            and prior art. Organize findings by relevance and quality.
          timeout_seconds: 300
        - name: synthesizer
          role: >
            You are a technical writer. Synthesize the research findings
            into a clear, actionable summary. Highlight key insights,
            trade-offs, and specific recommendations for our project.
          timeout_seconds: 300

    # === Auto-Rebalance Project — 6 Parallel Agents ===

    signal-processing:
      description: "Agent 1: Advanced signal processing (Fourier, Wavelet, UKF, Particle Filter)"
      teammates:
        - name: signal-engineer
          role: >
            You are a Rust signal processing engineer. Read and implement the
            AGENT 1 section from .agent-plans/AGENT_1_2_SIGNAL_AI.md. Create
            all files under signal-engine/src/filters/ and signal-engine/src/analysis/.
            Add required dependencies to Cargo.toml. Write tests. Do NOT touch
            the AI agents section (Agent 2) — another agent handles that.
          timeout_seconds: 900

    ai-agents:
      description: "Agent 2: AI agents (DQN, LLM, Ensemble)"
      teammates:
        - name: ai-engineer
          role: >
            You are a Rust ML/AI engineer. Read and implement the AGENT 2
            section from .agent-plans/AGENT_1_2_SIGNAL_AI.md. Create all
            files under signal-engine/src/ai/. Add required dependencies
            to Cargo.toml (tch, reqwest). Write tests. Do NOT touch the
            signal processing section (Agent 1).
          timeout_seconds: 900

    polymarket-arb:
      description: "Agent 3: Polymarket arbitrage system"
      teammates:
        - name: arb-engineer
          role: >
            You are a Rust trading systems engineer. Read and implement the
            full plan from .agent-plans/AGENT_3_POLYMARKET.md. Create the
            entire polymarket-arb/ crate at the project root with all source
            files, Cargo.toml, tests. Wire integration with signal-engine.
          timeout_seconds: 900

    wallet-discovery:
      description: "Agent 4: Wallet discovery & multi-DEX price aggregation"
      teammates:
        - name: discovery-engineer
          role: >
            You are a Rust/Solana engineer. Read and implement the full plan
            from .agent-plans/AGENT_4_DISCOVERY_PRICING.md. Create files under
            signal-engine/src/discovery/ and signal-engine/src/pricing/. Add
            API endpoints to server.rs. Add required dependencies to Cargo.toml.
          timeout_seconds: 900

    advanced-frontend:
      description: "Agent 5: Advanced frontend (charts, dashboards)"
      teammates:
        - name: frontend-engineer
          role: >
            You are a TypeScript/React/Next.js frontend engineer. Read and
            implement the full plan from .agent-plans/AGENT_5_FRONTEND.md.
            Create components under auto-rebalance-frontend/app/components/.
            Add required npm dependencies. Follow existing Next.js 16 patterns.
          timeout_seconds: 900

    testing-deployment:
      description: "Agent 6: Testing, documentation, CI/CD, Docker"
      teammates:
        - name: devops-engineer
          role: >
            You are a DevOps/testing engineer. Read and implement the full
            plan from .agent-plans/AGENT_6_TESTING_DEPLOYMENT.md. Create
            test suites, benchmarks, Dockerfiles, CI/CD workflows, monitoring
            configs, deployment scripts, and documentation.
          timeout_seconds: 900

# GM Projects — General Manager automated pipeline definitions
gm_projects:
  gm-test:
    description: "Lightweight 2-agent test for approval gate"
    repo_path: "/tmp/gm-test-repo"
    build_command: "python3 -c 'import hello'"
    test_command: "python3 -m pytest test_hello.py -v"
    agents:
      - team: feature-dev
        task: "Add a multiply(a, b) function to hello.py that returns a * b. Also add a test_multiply() test to test_hello.py that asserts multiply(3, 4) == 12."
      - team: feature-dev
        task: "Add a subtract(a, b) function to hello.py that returns a - b. Also modify the greet() function to return 'Hi, {name}!' instead of 'Hello, {name}!'. Add a test_subtract() test to test_hello.py."

  auto-rebalance:
    description: "Full auto-rebalance system build"
    repo_path: "/Users/wangjiacheng/Projects/claudeworkspace/auto-rebalance-project"
    build_command: "cargo build"
    test_command: "cargo test"
    agents:
      - team: signal-processing
        task: "Implement AGENT 1: Advanced signal processing (Fourier, Wavelet, UKF, Particle Filter). Read .agent-plans/AGENT_1_2_SIGNAL_AI.md for the full plan."
      - team: ai-agents
        task: "Implement AGENT 2: AI agents (DQN, LLM, Ensemble). Read .agent-plans/AGENT_1_2_SIGNAL_AI.md for the full plan."
      - team: polymarket-arb
        task: "Implement AGENT 3: Polymarket arbitrage system. Read .agent-plans/AGENT_3_POLYMARKET.md for the full plan."
      - team: wallet-discovery
        task: "Implement AGENT 4: Wallet discovery & multi-DEX price aggregation. Read .agent-plans/AGENT_4_DISCOVERY_PRICING.md for the full plan."
      - team: advanced-frontend
        task: "Implement AGENT 5: Advanced frontend (charts, dashboards). Read .agent-plans/AGENT_5_FRONTEND.md for the full plan."
      - team: testing-deployment
        task: "Implement AGENT 6: Testing, CI/CD, Docker, docs, monitoring. Read .agent-plans/AGENT_6_TESTING_DEPLOYMENT.md for the full plan."

# Feature flags
features:
  parallel_execution: false
  auto_scaling: false
  health_monitoring: true
