# Agent Orchestra Configuration

orchestra:
  # Name of your orchestration system
  name: "Agent Orchestra"

  # Version
  version: "1.0.0"

  # Default mode when not specified
  default_mode: "auto"

  # Scheduling configuration
  schedule:
    # How often to run (in pipeline, this is controlled by cron)
    interval_hours: 1

    # Retry configuration
    max_retries: 3
    retry_delay_seconds: 60

# Client mode: "claude-code" (free), "api" (paid), or "hybrid" (API with CLI fallback)
# Can be overridden by CLIENT_MODE env var
client:
  default_mode: "hybrid"

# Agent configurations
# Each agent can override the global client mode and define a system prompt.
agents:
  monitor:
    enabled: true
    timeout_seconds: 120
    # Use free CLI for simple monitoring tasks
    client_mode: "claude-code"
    system_prompt: >
      You are a system health monitor. Check the current state of the
      system and report any anomalies, warnings, or failures concisely.

  analyzer:
    enabled: true
    timeout_seconds: 180
    # Use API for analysis tasks that benefit from system prompts
    client_mode: "api"
    system_prompt: >
      You are a data analyst specializing in system performance.
      Identify patterns, bottlenecks, and actionable improvements.
      Be quantitative when possible.

  researcher:
    enabled: true
    timeout_seconds: 300
    # Hybrid: try API first, fall back to CLI
    client_mode: "hybrid"
    system_prompt: >
      You are a research assistant focused on AI and multi-agent systems.
      Provide well-structured summaries with key takeaways.

  reporter:
    enabled: true
    timeout_seconds: 120
    # Inherit global mode (no override)
    system_prompt: >
      You are a technical report writer. Synthesize information from
      multiple sources into clear, actionable reports.

# Output configuration
outputs:
  # Where to save results
  directory: "outputs"

  # Retention period in days
  retention_days: 30

  # File formats
  formats:
    - json
    - txt

# DigitalOcean configuration
digitalocean:
  region: "nyc3"

  # Container registry
  registry: "agent-orchestra"

  # App platform settings (if using)
  app:
    instance_size: "basic-xxs"
    instance_count: 1

# Notifications (configure your preferred method)
notifications:
  # Enable/disable notifications
  enabled: false

  # Notification channels
  channels:
    slack:
      enabled: false
      webhook_url: ""

    email:
      enabled: false
      recipients: []

    discord:
      enabled: false
      webhook_url: ""

# Logging configuration
logging:
  level: "INFO"
  format: "json"

# Agent Teams configuration (Claude Code Agent Teams / Opus 4.6)
teams:
  enabled: true
  # Directory where Claude Code stores team task state
  tasks_dir: "~/.claude/tasks"
  # Where to save team results
  output_prefix: "teams"

  definitions:
    feature-dev:
      description: "Full feature development lifecycle"
      teammates:
        - name: architect
          role: >
            You are a software architect. Analyze the requirements, design the
            solution architecture, define interfaces, and identify edge cases.
            Output a clear implementation plan with file-by-file changes.
          timeout_seconds: 300
        - name: implementer
          role: >
            You are a senior developer. Follow the architect's plan exactly.
            Write clean, tested, production-ready code. Include error handling
            and follow existing project conventions.
          timeout_seconds: 600
        - name: reviewer
          role: >
            You are a code reviewer. Review the implementation for correctness,
            edge cases, security issues, and style consistency. Provide specific
            actionable feedback with line references.
          timeout_seconds: 300

    code-review:
      description: "Thorough code review with security and style focus"
      teammates:
        - name: security-reviewer
          role: >
            You are a security engineer. Audit the code for OWASP top 10
            vulnerabilities, injection risks, authentication flaws, and data
            exposure. Rate severity and provide fix recommendations.
          timeout_seconds: 300
        - name: style-reviewer
          role: >
            You are a code quality expert. Review for readability, naming
            conventions, DRY violations, complexity, and consistency with the
            project's existing patterns. Suggest concrete improvements.
          timeout_seconds: 300

    debug:
      description: "Systematic debugging workflow"
      teammates:
        - name: reproducer
          role: >
            You are a QA engineer. Reproduce the reported bug by analyzing
            the code path, identifying inputs that trigger the issue, and
            writing a minimal reproduction case or failing test.
          timeout_seconds: 300
        - name: analyzer
          role: >
            You are a debugging specialist. Analyze the reproduction case,
            trace the root cause through the codebase, and explain exactly
            why the bug occurs with references to specific code locations.
          timeout_seconds: 300
        - name: fixer
          role: >
            You are a senior developer focused on bug fixes. Implement the
            minimal correct fix based on the root cause analysis. Ensure the
            fix doesn't introduce regressions and add test coverage.
          timeout_seconds: 300

    research:
      description: "Research and synthesize information on a topic"
      teammates:
        - name: searcher
          role: >
            You are a research analyst. Search broadly for information on
            the given topic. Gather relevant sources, code examples, docs,
            and prior art. Organize findings by relevance and quality.
          timeout_seconds: 300
        - name: synthesizer
          role: >
            You are a technical writer. Synthesize the research findings
            into a clear, actionable summary. Highlight key insights,
            trade-offs, and specific recommendations for our project.
          timeout_seconds: 300

# Feature flags
features:
  parallel_execution: false
  auto_scaling: false
  health_monitoring: true
